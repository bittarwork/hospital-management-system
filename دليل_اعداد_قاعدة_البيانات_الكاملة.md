# 🏥 دليل إعداد قاعدة البيانات الكاملة - نظام إدارة المستشفى

## 📋 نظرة عامة

هذا السكريبت يقوم بإنشاء قاعدة بيانات كاملة لنظام إدارة المستشفى مع بيانات تجريبية شاملة وحساب ادمن جاهز للاستخدام.

## 🎯 ما يقوم السكريبت بإنشائه

### 👑 حساب الادمن

- **اسم المستخدم**: `admin`
- **كلمة المرور**: `admin123`
- **الايميل**: `admin@hospital.com`
- **الصلاحيات**: صلاحيات كاملة لكل النظام

### 📊 البيانات التجريبية

- **👥 15 مستخدم** بأدوار مختلفة (طبيب، ممرض، موظف استقبال، إلخ)
- **👨‍⚕️ 25 طبيب** بتخصصات مختلفة ومواعيد عمل
- **🏥 100 مريض** بمعلومات طبية كاملة
- **📅 200 موعد** بحالات مختلفة
- **📋 150 سجل طبي** بتشخيصات وعلاجات
- **💰 180 فاتورة** بحالات دفع مختلفة

## 🗃️ إعدادات قاعدة البيانات

- **اسم قاعدة البيانات**: `hospital_management_system_demo`
- **عنوان الاتصال**: `mongodb://localhost:27017/hospital_management_system_demo`

## 🚀 طرق تشغيل السكريبت

### 1. الطريقة الأسهل (الملفات المباشرة)

#### للويندوز - PowerShell:

```powershell
.\اعداد_قاعدة_البيانات_كاملة.ps1
```

#### للويندوز - Command Prompt:

```cmd
اعداد_قاعدة_البيانات_كاملة.bat
```

### 2. استخدام npm script:

```bash
# الانتقال لمجلد backend
cd backend

# تشغيل سكريبت إعداد قاعدة البيانات
npm run setup-database
```

### 3. استخدام Node.js مباشرة:

```bash
# الانتقال لمجلد backend
cd backend

# تشغيل السكريبت
node scripts/setup-complete-database.js
```

## ⚙️ متطلبات التشغيل

### 1. البرامج المطلوبة

- **Node.js** (الإصدار 16 أو أحدث) - [تحميل](https://nodejs.org)
- **MongoDB** - محلي أو سحابي
- **npm** (يأتي مع Node.js)

### 2. إعداد MongoDB

#### الخيار الأول: MongoDB محلي

```bash
# تشغيل MongoDB محلياً
mongod --dbpath /path/to/your/db
```

#### الخيار الثاني: MongoDB Atlas (سحابي)

1. إنشاء حساب في [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
2. إنشاء cluster جديد
3. الحصول على connection string
4. تعديل متغيرات البيئة

### 3. متغيرات البيئة (اختيارية)

يمكنك تخصيص الإعدادات عن طريق إنشاء ملف `.env` في مجلد backend:

```env
# اسم قاعدة البيانات
DB_NAME=hospital_management_system_demo

# عنوان الاتصال بقاعدة البيانات
MONGODB_URI=mongodb://localhost:27017/hospital_management_system_demo

# أو استخدام قاعدة بيانات سحابية
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/hospital_management_system_demo

# إعدادات البيانات التجريبية
TOTAL_PATIENTS=100
TOTAL_DOCTORS=25
TOTAL_USERS=15
TOTAL_APPOINTMENTS=200
TOTAL_MEDICAL_RECORDS=150
TOTAL_INVOICES=180
```

## 📋 خطوات التشغيل التفصيلية

### 1. التحضير

```bash
# تأكد من تشغيل MongoDB
mongod

# انتقل لمجلد المشروع
cd hospital-management-system

# تأكد من تثبيت المكتبات
cd backend
npm install
```

### 2. تشغيل السكريبت

```bash
# استخدم أحد الطرق المذكورة أعلاه
npm run setup-database
```

### 3. التحقق من النتائج

```bash
# تشغيل الخادم
npm run dev

# فتح المتصفح والذهاب للموقع
# تسجيل الدخول باستخدام:
# اسم المستخدم: admin
# كلمة المرور: admin123
```

## ✅ علامات النجاح

عند نجاح العملية ستظهر رسالة مثل:

```
🎉 تم إنشاء قاعدة البيانات بنجاح!
=====================================
📊 ملخص البيانات:
   👑 حساب الادمن: 1
   👥 المستخدمين: 15
   👨‍⚕️ الأطباء: 25
   🏥 المرضى: 100
   📅 المواعيد: 200
   📋 السجلات الطبية: 150
   💰 الفواتير: 180

🔑 بيانات تسجيل الدخول:
   👤 اسم المستخدم: admin
   🔒 كلمة المرور: admin123
   📧 الايميل: admin@hospital.com
```

## 🔧 حل المشاكل الشائعة

### المشكلة: خطأ في الاتصال بقاعدة البيانات

```
❌ فشل الاتصال بقاعدة البيانات
```

**الحل:**

1. تأكد من تشغيل MongoDB
2. تحقق من عنوان الاتصال في متغيرات البيئة
3. تأكد من عدم وجود firewall يمنع الاتصال

### المشكلة: Node.js غير مثبت

```
❌ Node.js غير مثبت على النظام
```

**الحل:**

1. تحميل Node.js من [nodejs.org](https://nodejs.org)
2. تثبيته وإعادة تشغيل Terminal
3. التحقق من التثبيت: `node --version`

### المشكلة: خطأ في الأذونات

```
❌ خطأ في الأذونات
```

**الحل:**

1. تشغيل Terminal كمدير
2. أو استخدام `sudo` في Linux/Mac
3. التأكد من أذونات مجلد المشروع

### المشكلة: البيانات موجودة مسبقاً

```
⚠️ البيانات موجودة مسبقاً
```

**الحل:**
السكريبت يقوم بمسح البيانات الموجودة تلقائياً، لكن يمكنك:

1. مسح قاعدة البيانات يدوياً
2. استخدام اسم قاعدة بيانات مختلف
3. تشغيل السكريبت مرة أخرى

## 🔒 الأمان والخصوصية

### ⚠️ تحذيرات مهمة

1. **هذا السكريبت للتجربة فقط** - لا تستخدمه في بيئة الإنتاج
2. **البيانات وهمية** - جميع البيانات مُولدة عشوائياً
3. **تغيير كلمة المرور** - يُنصح بتغيير كلمة مرور الادمن
4. **حذف البيانات** - يمكن حذف البيانات التجريبية بسهولة

### 🔐 نصائح الأمان

1. استخدم كلمات مرور قوية في الإنتاج
2. لا تشارك بيانات الادمن مع أشخاص غير مصرح لهم
3. قم بعمل نسخة احتياطية من البيانات المهمة
4. استخدم HTTPS في بيئة الإنتاج

## 🎛️ تخصيص الإعدادات

### تغيير اسم قاعدة البيانات

```bash
# في متغيرات البيئة
DB_NAME=my_custom_database_name

# أو تعديل الملف مباشرة
backend/config/database-config.js
```

### تغيير كمية البيانات

```bash
# في متغيرات البيئة
TOTAL_PATIENTS=200
TOTAL_DOCTORS=50
TOTAL_APPOINTMENTS=500
```

### تغيير بيانات الادمن

```bash
# في متغيرات البيئة
ADMIN_EMAIL=myemail@example.com
ADMIN_PASSWORD=mypassword123
```

## 📞 الدعم الفني

في حالة وجود مشاكل:

1. تحقق من ملف logs
2. تأكد من تشغيل MongoDB
3. راجع متغيرات البيئة
4. تحقق من اتصال الإنترنت (للقواعد السحابية)
5. تأكد من إصدار Node.js

## 🔄 إعادة تشغيل السكريبت

يمكن تشغيل السكريبت عدة مرات:

- سيتم مسح البيانات الموجودة
- إنشاء بيانات جديدة تماماً
- حفظ اسم قاعدة البيانات

## 📈 بيانات إضافية

### أنواع المستخدمين المُنشأة:

- **مدير عام** (admin)
- **طبيب** (doctor)
- **ممرض** (nurse)
- **موظف استقبال** (receptionist)
- **صيدلي** (pharmacist)
- **محاسب** (accountant)

### التخصصات الطبية:

- الطب الباطني
- الجراحة العامة
- أطفال
- قلب
- عظام
- جلدية
- عيون
- أنف وأذن وحنجرة
- أعصاب
- نفسية

---

**تاريخ الإنشاء**: ${new Date().toLocaleDateString('ar-SA')}
**الإصدار**: 1.0.0
**نوع السكريبت**: إعداد قاعدة بيانات كاملة مع بيانات تجريبية
